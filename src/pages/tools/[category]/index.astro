---
/**
 * Category Page
 * Displays all tools within a specific category
 */
import Layout from '../../../layouts/Layout.astro';
import ToolCard from '../../../components/tools/ToolCard.astro';
import { toolCategories, getToolsByCategory, getCategoryBySlug } from '../../../data/tools-data';
import * as LucideIcons from 'lucide-react';

export function getStaticPaths() {
  return toolCategories.map((category) => ({
    params: { category: category.slug },
    props: { category },
  }));
}

const { category } = Astro.props;
const tools = getToolsByCategory(category.id);
const IconComponent = (LucideIcons as any)[category.icon] || LucideIcons.Folder;

// Get related categories (excluding current)
const relatedCategories = toolCategories.filter(c => c.id !== category.id).slice(0, 3);
---

<Layout 
  title={`${category.name} Tools - Free SEO Generators & Validators`}
  description={`${category.description} ${tools.length} free tools for ${category.name.toLowerCase()}. No signup required.`}
>
  <!-- Breadcrumb -->
  <section class="pt-32 pb-8 bg-[var(--bg-primary)]">
    <div class="max-w-7xl mx-auto px-6">
      <nav class="flex items-center gap-2 text-sm text-[var(--text-muted)]">
        <a href="/tools" class="hover:text-[var(--accent-red)] transition-colors font-medium">Tools</a>
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
        <span class="text-[var(--text-primary)] font-bold">{category.name}</span>
      </nav>
    </div>
  </section>

  <!-- Hero Section -->
  <section class="pb-16 bg-[var(--bg-primary)] overflow-hidden relative">
    <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-red-600/5 rounded-full blur-[150px]"></div>
    
    <div class="max-w-7xl mx-auto px-6 relative z-10">
      <div class="flex flex-col lg:flex-row items-start gap-12">
        <div class="flex-1">
          <div class="flex items-center gap-4 mb-8">
            <div class="w-16 h-16 rounded-2xl bg-[var(--accent-red)] flex items-center justify-center text-white shadow-lg shadow-red-600/20">
              <IconComponent className="w-8 h-8" />
            </div>
            <span class={`px-3 py-1 text-[10px] font-black uppercase tracking-wider rounded-lg ${
              category.tier === 1 
                ? 'bg-[var(--accent-red)]/10 text-[var(--accent-red)]' 
                : 'bg-[var(--accent-yellow)]/20 text-[var(--accent-yellow)]'
            }`}>
              Tier {category.tier}
            </span>
          </div>
          
          <h1 class="text-4xl md:text-6xl font-black italic uppercase tracking-tighter text-[var(--text-primary)] mb-6 leading-tight">
            {category.name}
          </h1>
          
          <p class="text-xl text-[var(--text-secondary)] leading-relaxed max-w-2xl mb-8">
            {category.description}
          </p>
          
          <div class="flex items-center gap-6">
            <div class="text-center">
              <div class="text-3xl font-black italic text-[var(--accent-red)]">{tools.length}</div>
              <div class="text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)]">Tools</div>
            </div>
            <div class="w-px h-12 bg-[var(--border-subtle)]"></div>
            <div class="text-center">
              <div class="text-3xl font-black italic text-[var(--accent-yellow)]">Free</div>
              <div class="text-[10px] font-black uppercase tracking-widest text-[var(--text-muted)]">Forever</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Tools Grid -->
  <section class="py-16 bg-[var(--bg-secondary)]">
    <div class="max-w-7xl mx-auto px-6">
      <div class="mb-12">
        <h2 class="text-2xl font-black italic uppercase tracking-tighter text-[var(--text-primary)]">
          All <span class="text-[var(--accent-red)]">{category.name}</span> Tools
        </h2>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {tools.map((tool) => (
          <ToolCard tool={tool} categorySlug={category.slug} />
        ))}
      </div>
    </div>
  </section>

  <!-- Related Categories -->
  <section class="py-16 bg-[var(--bg-primary)] border-t border-[var(--border-subtle)]">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="text-2xl font-black italic uppercase tracking-tighter text-[var(--text-primary)] mb-8">
        Related <span class="text-[var(--accent-red)]">Categories</span>
      </h2>
      
      <div class="grid md:grid-cols-3 gap-6">
        {relatedCategories.map((relatedCat) => {
          const RelatedIcon = (LucideIcons as any)[relatedCat.icon] || LucideIcons.Folder;
          return (
            <a 
              href={`/tools/${relatedCat.slug}`}
              class="flex items-center gap-4 p-6 bg-[var(--bg-card)] border-2 border-[var(--border-subtle)] rounded-2xl hover:border-[var(--accent-red)] transition-all group"
            >
              <div class="w-12 h-12 rounded-xl bg-[var(--accent-red)]/10 flex items-center justify-center text-[var(--accent-red)] group-hover:bg-[var(--accent-red)] group-hover:text-white transition-all">
                <RelatedIcon className="w-6 h-6" />
              </div>
              <div>
                <h3 class="font-black text-[var(--text-primary)] uppercase tracking-tight group-hover:text-[var(--accent-red)] transition-colors">
                  {relatedCat.name}
                </h3>
                <p class="text-xs text-[var(--text-muted)]">{relatedCat.toolCount} tools</p>
              </div>
            </a>
          );
        })}
      </div>
    </div>
  </section>

  <!-- SEO Content Section -->
  <section class="py-24 bg-[var(--bg-secondary)]">
    <div class="max-w-4xl mx-auto px-6">
      <article class="prose prose-lg dark:prose-invert max-w-none">
        <h2 class="text-3xl font-black italic uppercase tracking-tighter text-[var(--text-primary)] mb-8">
          About {category.name} Tools
        </h2>
        
        <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
          Our {category.name.toLowerCase()} tools are designed to help SEO professionals, web developers, and digital marketers 
          optimize their websites for search engines. Each tool in this category is built with best practices in mind and 
          generates valid, production-ready code.
        </p>
        
        <h3 class="text-xl font-black uppercase tracking-tight text-[var(--text-primary)] mt-8 mb-4">
          Why Use These Tools?
        </h3>
        
        <ul class="space-y-2 text-[var(--text-secondary)]">
          <li><strong>Save Time:</strong> Generate code in seconds instead of writing it manually</li>
          <li><strong>Reduce Errors:</strong> Our tools follow the latest specifications and best practices</li>
          <li><strong>Learn Best Practices:</strong> See how proper implementation looks in practice</li>
          <li><strong>Free Forever:</strong> No signup, no limits, no hidden costs</li>
        </ul>
        
        <h3 class="text-xl font-black uppercase tracking-tight text-[var(--text-primary)] mt-8 mb-4">
          Who Is This For?
        </h3>
        
        <p class="text-[var(--text-secondary)] leading-relaxed">
          Whether you're an SEO specialist working on schema markup, a developer implementing tracking code, 
          or a marketer setting up campaign URLs, these tools help you work faster and more accurately.
        </p>
      </article>
    </div>
  </section>

  <!-- CTA -->
  <section class="py-16 bg-[var(--accent-red)] text-center">
    <div class="max-w-4xl mx-auto px-6">
      <h2 class="text-2xl md:text-4xl font-black italic uppercase tracking-tighter text-white mb-6">
        Explore All {tools.length} Tools
      </h2>
      <a href="/tools" class="inline-block px-10 py-4 bg-white text-[var(--accent-red)] font-black italic uppercase tracking-tighter rounded-xl hover:bg-black hover:text-white transition-all active:scale-95">
        Browse All Categories
      </a>
    </div>
  </section>
</Layout>
