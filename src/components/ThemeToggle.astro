---
---
<button
  id="theme-toggle"
  class="relative p-3 rounded-xl bg-[var(--bg-secondary)] border-2 border-[var(--border-subtle)] hover:bg-[var(--bg-card)] transition-all duration-300 group overflow-hidden active:scale-90 cursor-pointer"
  aria-label="Toggle Theme"
>
  <!-- Sun Icon (Light Mode) -->
  <div class="sun-icon transition-all duration-500">
    <svg class="w-5 h-5 text-[var(--accent-yellow)]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
      <circle cx="12" cy="12" r="4"></circle>
      <path d="M12 2v2"></path>
      <path d="M12 20v2"></path>
      <path d="m4.93 4.93 1.41 1.41"></path>
      <path d="m17.66 17.66 1.41 1.41"></path>
      <path d="M2 12h2"></path>
      <path d="M20 12h2"></path>
      <path d="m6.34 17.66-1.41 1.41"></path>
      <path d="m19.07 4.93-1.41 1.41"></path>
    </svg>
  </div>
  
  <!-- Moon Icon (Dark Mode) -->
  <div class="moon-icon absolute top-3 left-3 transition-all duration-500 -translate-y-[150%] opacity-0">
    <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5">
      <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
    </svg>
  </div>
</button>

<script>
  const themeToggle = document.getElementById('theme-toggle');
  const sunIcon = themeToggle?.querySelector('.sun-icon');
  const moonIcon = themeToggle?.querySelector('.moon-icon');
  
  const getTheme = () => {
    if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
      return localStorage.getItem('theme');
    }
    return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  };

  const updateIcons = (theme: string) => {
    if (theme === 'dark') {
      sunIcon?.classList.add('translate-y-[150%]', 'opacity-0');
      moonIcon?.classList.remove('-translate-y-[150%]', 'opacity-0');
      moonIcon?.classList.add('translate-y-0', 'opacity-100');
    } else {
      sunIcon?.classList.remove('translate-y-[150%]', 'opacity-0');
      moonIcon?.classList.add('-translate-y-[150%]', 'opacity-0');
      moonIcon?.classList.remove('translate-y-0', 'opacity-100');
    }
  };

  const setTheme = (theme: string) => {
    if (theme === 'dark') {
      document.documentElement.classList.add('dark');
    } else {
      document.documentElement.classList.remove('dark');
    }
    localStorage.setItem('theme', theme);
    updateIcons(theme);
  };

  themeToggle?.addEventListener('click', () => {
    const isDark = document.documentElement.classList.contains('dark');
    setTheme(isDark ? 'light' : 'dark');
  });

  // Initial set
  const currentTheme = getTheme();
  setTheme(currentTheme!);
</script>

<style>
  .sun-icon,
  .moon-icon {
    transition: transform 0.5s ease, opacity 0.5s ease;
  }
</style>
